<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Личный кабинет</title>
    <th:block th:include="/fragments/header :: scripts"></th:block>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!--<script src="/media/vue.min.js"></script>-->
    <script th:inline="javascript">
        /*<![CDATA[*/

        let currentUser = /*[[${currentUser}]]*/;
        let currentCompany;
        let pendingOrders = /*[[${pendingOrders}]]*/;
        let currentCompanyId = /*[[${currentCompanyId}]]*/;
        let loadingTypes = /*[[${loadingTypes}]]*/;
        var loadingTypeOptions = [];
        loadingTypes.forEach(function (x) {
            loadingTypeOptions.push({value: x, label: x});
        });
        let vehicleTypes = /*[[${vehicleTypes}]]*/;
        var vehicleTypeOptions = [];
        vehicleTypes.forEach(function (x) {
            vehicleTypeOptions.push({value: x, label: x});
        });
        let vehicleBodyTypes = /*[[${vehicleBodyTypes}]]*/;
        var vehicleBodyTypeOptions = [];
        vehicleBodyTypes.forEach(function (x) {
            vehicleBodyTypeOptions.push({value: x, label: x});
        });
        let paymentTypes = /*[[${paymentTypes}]]*/;
        var paymentTypeOptions = [];
        paymentTypes.forEach(function (x) {
            paymentTypeOptions.push({value: x, label: x});
        });

        $.get(`/api/companies/${currentCompanyId}`).success(function (data) {
            currentCompany = data;
            console.log(currentCompany);
        });
        /*]]>*/
    </script>
    <script sec:authorize="hasAnyAuthority('ROLE_TRANSPORT_COMPANY')" src="/profile/orders.js"></script>
    <script sec:authorize="hasAnyAuthority('ROLE_TRANSPORT_COMPANY')" src="/profile/js/transports.js"></script>
    <script sec:authorize="hasAnyAuthority('ROLE_TRANSPORT_COMPANY')" src="/profile/js/drivers.js"></script>


</head>
<body class="grey">
<div th:insert="fragments/header :: header ('profile')"></div>

<nav class="logist-tabs">
    <div>
        <ul class="ml-md-auto flex-row nav container nav-justified" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" aria-selected="false" href="#tab-info"><i
                        class="fa fa-user" aria-hidden="true"></i> Профиль</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" aria-selected="false" href="#tab-orders"><span class="badge badge-light" th:if="${pendingOrders!=null && #lists.size(pendingOrders) > 0}" th:text="${#lists.size(pendingOrders)}"></span>
                    <i class="fa fa-th-list" aria-hidden="true"></i> Заявки </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" aria-selected="false" href="#tab-transports"><i
                        class="fa fa-truck" aria-hidden="true"></i> Транспортные средства</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" aria-selected="false" href="#tab-drivers"><i class="fa fa-users"
                                                                                                 aria-hidden="true"></i> Водители</a>
            </li>
        </ul>
    </div>
</nav>
<div class="tab-content" id="tabContent">
    <div id="tab-info" class="tab-pane in active">
        <div class="spaced-container white container-fluid">
            <h4>Данные</h4>
            <form>
                <div class="form-group">
                    <label >Email address
                    <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
                    </label>
                    <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                </div>
                <div class="form-group">
                    <label for="exampleInputPassword1">Password</label>
                    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                    <label class="form-check-label" for="exampleCheck1">Check me out</label>
                </div>
                <button type="submit" class="btn btn-primary">Обновить</button>
            </form>
        </div>
    </div>
    <div id="tab-orders" class="tab-pane">
        <div class="spaced-container white container-fluid">
            <h4>Заявки</h4>
            <div class="row" >
                <div class="col-3">

                    <div class="list-group" id="pendingOrders">
                        <a href="#" v-for="pendingOrder in pendingOrders" @click="loadOrderInfo(pendingOrder.id)" class="list-group-item list-group-item-action">
                            {{ pendingOrder.number }}
                        </a>
                    </div>
                </div>
                <div class="col-5" id="pendingOrderInfo">
                    <h5>{{order.number}}</h5>
                    <div class="row">
                        <div class="col-6">
                            Отправление:<br>
                            <!--{{pickupPoint.name}}<br><br>-->
                            Дата оплаты:<br>
                            {{order.paymentDate}}
                        </div>
                        <div class="col-6">
                            Доставка:<br>
                            <!--{{dropPoint.name}}<br><br>-->
                            Дата возврата документов:<br>
                            {{order.documentReturnDate}}
                        </div>
                    </div>
                </div>
                <div class="col-4"></div>
            </div>
        </div>
    </div>
    <div id="tab-transports" class="tab-pane">

        <div class="container-fluid spaced-container white">
            <h4>Транспортные средства</h4>
            <div>
                <table class="table  table table-striped table-bordered" id="transportDataTable">
                    <thead>
                    <tr>
                        <th>id</th>
                        <th>Номер</th>
                        <th>Тип</th>
                        <th>Кузов</th>
                        <th>Погрузка</th>
                        <th>Тоннаж</th>
                        <th>Объем</th>
                        <th>Коники</th>
                        <th>Гидроборт</th>
                        <th>GPS</th>
                        <th>Комментарий</th>
                    </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>
    <div id="tab-drivers" class="tab-pane">

        <div class="container-fluid spaced-container white">
            <h4>Водители</h4>
            <div>
                <table class="table table table-striped table-bordered" id="driverDataTable">
                    <thead>
                    <tr>
                        <th>id</th>
                        <th>ФИО</th>
                        <th>Телефон</th>
                        <th>Паспорт</th>
                        <th>Водительское удостверение</th>
                        <th>Рейтинг</th>
                        <th>Мобильное приложение</th>
                        <th>Отслеживание по телефону</th>
                        <th>В штате</th>
                        <th>Оплата</th>
                    </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>

</div>
<div th:insert="fragments/header :: footer"></div>

</body>
</html>